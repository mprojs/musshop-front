exports.ids=[1],exports.modules={"305l":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AuthModule",(function(){return AuthModule}));var common=__webpack_require__("ofXK"),router=__webpack_require__("tyNb"),store=__webpack_require__("PcjG"),fesm2015_forms=__webpack_require__("3Pt+"),core=__webpack_require__("fXoL"),fesm2015_store=__webpack_require__("kt0X"),form_field=__webpack_require__("kmnG"),input=__webpack_require__("qFsG"),fesm2015_button=__webpack_require__("bTqV");function SigninComponent_div_0_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",8),core["\u0275\u0275elementStart"](1,"p"),core["\u0275\u0275text"](2,"This action is only available for registered users."),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](3,"p"),core["\u0275\u0275text"](4,"Please login or register."),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"]())}function SigninComponent_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",9),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](ctx_r1.error)}}const _c0=function(a0){return{returnUrl:a0}};class signin_component_SigninComponent{constructor(store,router,route){this.store=store,this.router=router,this.route=route}ngOnInit(){this.loginForm=new fesm2015_forms.e({username:new fesm2015_forms.c("",{validators:[fesm2015_forms.q.required]}),password:new fesm2015_forms.c("",{validators:[fesm2015_forms.q.required]})}),this.returnUrl=this.route.snapshot.queryParams.returnUrl,this.returnUrl?(console.log(this.returnUrl),this.showDisclamer=!0):this.returnUrl="/shop",this.store.select(store.b.selectIsAuth).subscribe(isAuth=>{isAuth&&this.router.navigateByUrl(this.returnUrl)}),this.store.select(store.b.selectLoginError).subscribe(error=>this.error=error)}get f(){return this.loginForm.controls}onSubmit(){this.loginForm.invalid||this.store.dispatch(store.a.loginUser({username:this.f.username.value,password:this.f.password.value}))}}signin_component_SigninComponent.\u0275fac=function SigninComponent_Factory(t){return new(t||signin_component_SigninComponent)(core["\u0275\u0275directiveInject"](fesm2015_store.h),core["\u0275\u0275directiveInject"](router.d),core["\u0275\u0275directiveInject"](router.a))},signin_component_SigninComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:signin_component_SigninComponent,selectors:[["app-signin"]],decls:17,vars:6,consts:[["class","message-pane",4,"ngIf"],[1,"form-wrap"],["class","mat-error",4,"ngIf"],[1,"form",3,"formGroup","ngSubmit"],["routerLink","/auth/signup",3,"queryParams"],["formControlName","username","matInput","","placeholder","Your login","type","text"],["formControlName","password","matInput","","placeholder","Your password","type","password"],["color","primary","mat-raised-button","","type","submit"],[1,"message-pane"],[1,"mat-error"]],template:function SigninComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SigninComponent_div_0_Template,5,0,"div",0),core["\u0275\u0275elementStart"](1,"div",1),core["\u0275\u0275template"](2,SigninComponent_div_2_Template,2,1,"div",2),core["\u0275\u0275elementStart"](3,"form",3),core["\u0275\u0275listener"]("ngSubmit",(function SigninComponent_Template_form_ngSubmit_3_listener(){return ctx.onSubmit()})),core["\u0275\u0275elementStart"](4,"h2"),core["\u0275\u0275text"](5,"Sign in"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](6,"p"),core["\u0275\u0275elementContainerStart"](7),core["\u0275\u0275text"](8,"Don't have account?"),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275elementStart"](9,"a",4),core["\u0275\u0275text"](10,"Sign up"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](11,"mat-form-field"),core["\u0275\u0275element"](12,"input",5),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](13,"mat-form-field"),core["\u0275\u0275element"](14,"input",6),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](15,"button",7),core["\u0275\u0275text"](16,"Submit"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275property"]("ngIf",ctx.showDisclamer),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.error),core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("formGroup",ctx.loginForm),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("queryParams",core["\u0275\u0275pureFunction1"](4,_c0,ctx.returnUrl)))},directives:[common.NgIf,fesm2015_forms.r,fesm2015_forms.l,fesm2015_forms.f,router.f,form_field.a,fesm2015_forms.b,input.a,fesm2015_forms.k,fesm2015_forms.d,fesm2015_button.a],styles:[".form-wrap[_ngcontent-%COMP%]{max-width:400px;margin:20px auto}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:80%}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px;color:#00f}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:10em;outline:none}.mat-error[_ngcontent-%COMP%]{text-align:center}.message-pane[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.message-pane[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color)}"]});var convert_messages_utils=__webpack_require__("+DfE");function SignupComponent_div_1_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",8),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](ctx_r0.error)}}const signup_component_c0=function(a0){return{returnUrl:a0}};class signup_component_SignupComponent{constructor(store,router,route){this.store=store,this.router=router,this.route=route}ngOnInit(){this.signupForm=new fesm2015_forms.e({email:new fesm2015_forms.c("",{validators:[fesm2015_forms.q.required,fesm2015_forms.q.email]}),username:new fesm2015_forms.c("",{validators:[fesm2015_forms.q.required]}),password:new fesm2015_forms.c("",{validators:[fesm2015_forms.q.required]})}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/shop",this.store.select(store.b.selectIsAuth).subscribe(isAuth=>{isAuth&&this.router.navigate([this.returnUrl])}),this.store.select(store.b.selectRegisterError).subscribe(error=>this.error=Object(convert_messages_utils.b)(error))}get f(){return this.signupForm.controls}onSubmit(){this.signupForm.invalid||this.store.dispatch(store.a.registerUser({username:this.f.username.value,password:this.f.password.value,email:this.f.email.value}))}}signup_component_SignupComponent.\u0275fac=function SignupComponent_Factory(t){return new(t||signup_component_SignupComponent)(core["\u0275\u0275directiveInject"](fesm2015_store.h),core["\u0275\u0275directiveInject"](router.d),core["\u0275\u0275directiveInject"](router.a))},signup_component_SignupComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:signup_component_SignupComponent,selectors:[["app-signup"]],decls:18,vars:5,consts:[[1,"form-wrap"],["class","mat-error",4,"ngIf"],[1,"form",3,"formGroup"],["routerLink","/auth/signin",3,"queryParams"],["formControlName","email","matInput","","placeholder","Your email","type","text"],["formControlName","username","matInput","","placeholder","Your login","type","text"],["formControlName","password","matInput","","placeholder","Your password","type","password"],["color","primary","mat-raised-button","",3,"click"],[1,"mat-error"]],template:function SignupComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275template"](1,SignupComponent_div_1_Template,2,1,"div",1),core["\u0275\u0275elementStart"](2,"form",2),core["\u0275\u0275elementStart"](3,"h2"),core["\u0275\u0275text"](4,"Sign in"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](5,"p"),core["\u0275\u0275elementContainerStart"](6),core["\u0275\u0275text"](7,"Already have an account?"),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275elementStart"](8,"a",3),core["\u0275\u0275text"](9,"Sign in"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](10,"mat-form-field"),core["\u0275\u0275element"](11,"input",4),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](12,"mat-form-field"),core["\u0275\u0275element"](13,"input",5),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](14,"mat-form-field"),core["\u0275\u0275element"](15,"input",6),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](16,"button",7),core["\u0275\u0275listener"]("click",(function SignupComponent_Template_button_click_16_listener(){return ctx.onSubmit()})),core["\u0275\u0275text"](17,"Submit"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("ngIf",ctx.error),core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("formGroup",ctx.signupForm),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("queryParams",core["\u0275\u0275pureFunction1"](3,signup_component_c0,ctx.returnUrl)))},directives:[common.NgIf,fesm2015_forms.r,fesm2015_forms.l,fesm2015_forms.f,router.f,form_field.a,fesm2015_forms.b,input.a,fesm2015_forms.k,fesm2015_forms.d,fesm2015_button.a],styles:[".form-wrap[_ngcontent-%COMP%]{width:400px;margin:20px auto}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:80%}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px;color:#00f}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:10em;outline:none}.mat-error[_ngcontent-%COMP%]{text-align:center}"]});var first=__webpack_require__("SxV6"),filter=__webpack_require__("pLZG"),skip=__webpack_require__("zP0r"),take=__webpack_require__("IzEk"),objects_utils=__webpack_require__("lsfL");function ProfileComponent_div_3_Template(rf,ctx){if(1&rf){const _r2=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",2),core["\u0275\u0275elementStart"](1,"form",3),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275elementStart"](3,"span"),core["\u0275\u0275text"](4,"Username"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](5,"span"),core["\u0275\u0275text"](6),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](7,"div"),core["\u0275\u0275elementStart"](8,"span"),core["\u0275\u0275text"](9,"Email"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](10,"span"),core["\u0275\u0275text"](11),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](12,"div"),core["\u0275\u0275elementStart"](13,"label",4),core["\u0275\u0275text"](14,"First name"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275element"](15,"input",5),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](16,"div"),core["\u0275\u0275elementStart"](17,"label",6),core["\u0275\u0275text"](18,"Last name"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275element"](19,"input",7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementStart"](20,"button",8),core["\u0275\u0275listener"]("click",(function ProfileComponent_div_3_Template_button_click_20_listener(){core["\u0275\u0275restoreView"](_r2);return core["\u0275\u0275nextContext"]().updateProfileClick()})),core["\u0275\u0275text"](21,"Update profile "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("formGroup",ctx_r0.form),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](ctx_r0.profile.username),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](ctx_r0.profile.email),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("disabled",!ctx_r0.form.valid||!ctx_r0.form.touched)}}class profile_component_ProfileComponent{constructor(store,router){this.store=store,this.router=router}ngOnInit(){this.store.select(store.b.selectUserProfile).pipe(Object(first.a)()).subscribe(profile=>{profile?this.profile=profile:this.store.dispatch(store.a.loadProfile())}),this.form=new fesm2015_forms.e({firstName:new fesm2015_forms.c("",{validators:[fesm2015_forms.q.minLength(1)]}),lastName:new fesm2015_forms.c("",{validators:[fesm2015_forms.q.minLength(1)]})}),this.subscribeToProfileChange()}subscribeToProfileChange(skipLen=0){this.store.select(store.b.selectUserProfile).pipe(Object(filter.a)(data=>null!=data),Object(skip.a)(skipLen),Object(take.a)(1)).subscribe(data=>{this.profile=Object(objects_utils.a)(data),this.form.markAsUntouched(),this.profile.firstName&&this.form.controls.firstName.setValue(this.profile.firstName),this.profile.lastName&&this.form.controls.lastName.setValue(this.profile.lastName)})}updateProfileClick(){console.log(this.form.controls.firstName.value),console.log(this.form.controls.lastName.value),this.subscribeToProfileChange(1),this.store.dispatch(store.a.updateProfile({username:this.profile.username,email:this.profile.email,firstName:this.form.controls.firstName.value,lastName:this.form.controls.lastName.value}))}}profile_component_ProfileComponent.\u0275fac=function ProfileComponent_Factory(t){return new(t||profile_component_ProfileComponent)(core["\u0275\u0275directiveInject"](fesm2015_store.h),core["\u0275\u0275directiveInject"](router.d))},profile_component_ProfileComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:profile_component_ProfileComponent,selectors:[["app-profile"]],decls:4,vars:1,consts:[[1,"page"],["class","fields",4,"ngIf"],[1,"fields"],[3,"formGroup"],["for","firstName"],["type","text","id","firstName","formControlName","firstName"],["for","lastName"],["type","text","id","lastName","formControlName","lastName"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function ProfileComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275elementStart"](1,"h4"),core["\u0275\u0275text"](2,"Your profile"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275template"](3,ProfileComponent_div_3_Template,22,4,"div",1),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",ctx.profile))},directives:[common.NgIf,fesm2015_forms.r,fesm2015_forms.l,fesm2015_forms.f,fesm2015_forms.b,fesm2015_forms.k,fesm2015_forms.d,fesm2015_button.a],styles:[".page[_ngcontent-%COMP%]{margin-top:60px}h4[_ngcontent-%COMP%]{text-align:center;margin-top:20px;margin-bottom:10px}form[_ngcontent-%COMP%]{margin:20px auto;padding:20px;width:100%;max-width:500px;border:1px solid var(--primary-color);border-radius:4px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-weight:300}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;width:100%;margin:10px 0}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:2;text-align:left}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{flex:1;text-align:right;margin-right:20px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto;display:block}"]});var auth_guard=__webpack_require__("vgUK");const routes=[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"signin",component:signin_component_SigninComponent,data:{bc:"login"}},{path:"signup",component:signup_component_SignupComponent,data:{bc:"register"}},{path:"profile",component:profile_component_ProfileComponent,canActivate:[auth_guard.a]}];class AuthRoutingModule{constructor(){}}AuthRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:AuthRoutingModule}),AuthRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({factory:function AuthRoutingModule_Factory(t){return new(t||AuthRoutingModule)},imports:[[router.g.forChild(routes)],router.g]});var material_all_module=__webpack_require__("pejm");class AuthModule{}AuthModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:AuthModule}),AuthModule.\u0275inj=core["\u0275\u0275defineInjector"]({factory:function AuthModule_Factory(t){return new(t||AuthModule)},providers:[],imports:[[common.CommonModule,AuthRoutingModule,fesm2015_forms.p,material_all_module.a]]})},vgUK:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AuthGuard}));var _store__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("PcjG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("SxV6"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL"),_angular_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("tyNb"),_ngrx_store__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("kt0X");class AuthGuard{constructor(router,store){this.router=router,this.store=store}canActivate(route,state){let isAuth;return this.store.select(_store__WEBPACK_IMPORTED_MODULE_0__.b.selectIsAuth).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)()).subscribe(val=>isAuth=val),!!isAuth||(this.router.navigate(["/auth/signin"],{queryParams:{returnUrl:state.url}}),!1)}}AuthGuard.\u0275fac=function AuthGuard_Factory(t){return new(t||AuthGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__.d),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.h))},AuthGuard.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineInjectable"]({token:AuthGuard,factory:AuthGuard.\u0275fac,providedIn:"root"})}};